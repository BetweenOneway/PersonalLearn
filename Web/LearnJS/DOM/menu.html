<!DOCTYPE html>
<html>
    <head>
        <title>实现伸缩二级菜单</title>
        <meta charset = "utf-8"/>
        <style type="text/css">
            li {
                list-style: none;
            }

            li span{
                padding-left: 20px;
                cursor:pointer;
                background:url("./images/add.png") no-repeat center left;
            }

            li ul{
                height:0;
                overflow: hidden;
                transition:height 0.5s linear;
            }

            .open{
                background:url("./images/minus.png") no-repeat center left;
            }

            li:nth-child(1)>span.open+ul{
                height:65px;
            }
            li:nth-child(2)>span.open+ul{
                height:65px;
            }
            li:nth-child(3)>span.open+ul{
                height:106px;
            }
        </style>
    </head>
    <body>
        <ul class="tree">
            <li>
                <span class="open">考勤管理</span>
                <ul>
                    <li>日常考勤</li>
                    <li>请假申请</li>
                    <li>加班/出差</li>
                </ul>
            </li>
            <li>
                <span>信息中心</span>
                <ul>
                    <li>通知公告</li>
                    <li>公司新闻</li>
                    <li>规章制度</li>
                </ul>
            </li>
            <li>
                <span>协同办公</span>
                <ul>
                    <li>公文流转</li>
                    <li>文件中心</li>
                    <li>内部邮件</li>
                    <li>即时通信</li>
                    <li>短信提醒</li>
                </ul>
            </li>
        </ul>

        <script>
            var spans = document.querySelectorAll("ul.tree>li>span");
            for(var span of spans)
            {
                //如果要实现鼠标悬停开关菜单，使用onmouseover函数
                //hover是CSS属性
                span.onclick = function(){
                    var span = this;
                    //如果当前span是打开的，则关闭
                    if(span.className=="open")
                    {
                        span.className="";
                    }
                    else
                    {
                        //如果当前列表是关闭的，则先关闭打开的列表，再打开当前列表
                        var openSpan = document.querySelector("ul.tree>li>span.open");
                        if(openSpan != null)
                        {
                            openSpan.className="";
                        }
                        span.className = "open";
                    }
                }
            }
        </script>
    </body>
</html>